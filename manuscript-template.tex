% !TEX TS-program = lualatex

% Automate document class, classoption, fontsize and use the coma as sep at the top of the manuscript.md
\documentclass[12pt,oneside]{report}

%% Package geometry
\usepackage[left = 2cm,right = 2cm,top = 2cm,bottom = 2cm]{geometry}
\usepackage{pdflscape}

%% Package polyglossia
 \usepackage{polyglossia}
 \setmainlanguage[]{french}
 
%% Package fontspec
\usepackage{fontspec}
\setmainfont{calibri}[
  Path           = ./fonts/,
  Extension      = .ttf,
  BoldFont       = calibrib,
  ItalicFont     = calibrili,
  BoldItalicFont = calibriz]

\usepackage{unicode-math}
\setmathfont{STIX Two Math}
\usepackage{parskip}
\setlength{\parindent}{0pt} % Remove indentation
\setlength{\parskip}{6pt plus 2pt minus 1pt}

\pagestyle{plain}
% The default `plain` pagestyle just numbers the pages,
% whereas  
% \pagestyle{empty} 
% would give you no numbering.
% After one-million man-years of macro-composition, 
% there are also fancy pagestyles with much wilder options 
% for headers and footers, of course.

% Lists formatting: 
% note sure what 'fancy enums' are; something to do with lists, 
% as the further comment suggests: 

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}


\usepackage{array}
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
\let\PBS=\PreserveBackslash

% Create new command to deal with with pandoc's super/sub script.

% Web-style links:

% markdown inclines us to use links, since our texts can be made into html. 
% Why not have clickable blue links even in 
% learned, scientific, religious, juridical, poetical and other suchlike texts? 
% Never mind that they have been proven to destroy the nervous system!

% First, what about the fact that links like http://example.com are 
% technically code and thus must not be broken across lines? 
% [breaklinks=true] to the rescue!

% Nowadays LaTeX can handle all of this with another half million macros:

\usepackage[breaklinks=true]{hyperref}
\hypersetup{colorlinks,%
citecolor=black,%
filecolor=black,%
linkcolor=black,%
urlcolor=black}
\usepackage{url}

%% Graphics
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
\else\Gin@nat@width\fi}
\makeatother
\let\Oldincludegraphics\includegraphics
\renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=\maxwidth]{#1}}

%% linestreching

% Section numbering.  
% Here again is a variable you can specify on the commandline
% `markdown2pdf my.txt --number-sections --xetex --template=/wherever/this/is -o my.pdf`

\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\usepackage{caption}
\usepackage{cleveref} % pb with the cleveref package

%% Table
\usepackage{longtable}
\usepackage{booktabs}

%% Verbatim
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}

\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newenvironment{cslreferences}%
  {\setlength{\parindent}{0pt}%
  \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces}%
  {\par}



%% pandoc-fignos: required package
\usepackage{cleveref}

%% pandoc-tablenos: required package
\usepackage{caption}

%% pandoc-tablenos: environment to disable table caption prefixes
\makeatletter
\newcounter{tableno}
\newenvironment{tablenos:no-prefix-table-caption}{
  \caption@ifcompatibility{}{
    \let\oldthetable\thetable
    \let\oldtheHtable\theHtable
    \renewcommand{\thetable}{tableno:\thetableno}
    \renewcommand{\theHtable}{tableno:\thetableno}
    \stepcounter{tableno}
    \captionsetup{labelformat=empty}
  }
}{
  \caption@ifcompatibility{}{
    \captionsetup{labelformat=default}
    \let\thetable\oldthetable
    \let\theHtable\oldtheHtable
    \addtocounter{table}{-1}
  }
}
\makeatother


%\documentclass[11pt]{scrartcl} !!! Don't uncomment because already given on the .md
%\usepackage{kpfonts}
%\usepackage[T1]{fontenc}
%\usepackage{amsmath}
%\usepackage[english]{babel}
%\usepackage{geometry}
%\geometry{verbose,letterpaper,tmargin=3cm,bmargin=3cm,lmargin=3cm,rmargin=3cm}


%\input{../.assets/templates/pandoc}

%\usepackage[hang,flushmargin]{footmisc}



\title{Some notes on population dynamics} 

\author{François \textsc{Leroy}\\}

% At last:
% The document itself!:

% After filling in all these blanks above, or erasing them
% where they are not needed, Pandoc has finished writing the
% famous LaTeX *preamble* for your document.
% Now comes the all-important command \begin{document}
% which as you can see, will be paired with an \end{document} at the end.
% Pandoc knows whether you have a title, and has already
% specified what it is; if so, it demands that the title be rendered.
% Pandoc knows whether you want a table of contents, you
% specify this on the command line.
% Then, after fiddling with alignments, there comes the real
% business: pandoc slaps its rendering of your text in the place of
% the variable `body`
% It then concludes the document it has been writing.

\begin{document}


\maketitle

%{\small
%%\textsc{François\,Leroy}\\
%%}

\tableofcontents



\hypertarget{the-model}{%
\chapter{The model}\label{the-model}}

This is a citation: Hampton et al.
(\protect\hyperlink{ref-HampAnde15}{2015}) -- we can also have citations
in brackets (Hampton et al. \protect\hyperlink{ref-HampAnde15}{2015}).

\hypertarget{lists}{%
\section{Lists}\label{lists}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  one fish
\item
  two fish
\item
  red fish
\item
  blue fish
\end{enumerate}

\hypertarget{methods}{%
\chapter{Methods}\label{methods}}

There is an equation, which we can cite with \ref{eq:eq1}.

\begin{equation}J'(p) = \frac{1}{\text{log}(S)}\times\left(-\sum p \text{log}(p)\right)\label{eq:eq1}\end{equation}

\hypertarget{tables}{%
\chapter{Tables}\label{tables}}

We can do tables:

\begin{tablenos:no-prefix-table-caption}

\begin{longtable}[]{@{}lr@{}}
\toprule
Column 1 & Column 2\tabularnewline
\midrule
\endhead
c1 & c2\tabularnewline
\bottomrule
\end{longtable}

\end{tablenos:no-prefix-table-caption}

\hypertarget{figures}{%
\chapter{Figures}\label{figures}}

\begin{figure}
\hypertarget{fig:biomes}{%
\centering
\includegraphics{figures/biomes.png}
\caption{This is the legend of the figure}\label{fig:biomes}
}
\end{figure}

We can refer to \cref{fig:biomes}.

\hypertarget{code}{%
\chapter{Code?}\label{code}}

Yes

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{for}\NormalTok{ i }\KeywordTok{in}\NormalTok{ eachindex(x)}
\NormalTok{  x[i] = zero(eltype(x)) }\CommentTok{\# Don\textquotesingle{}t do that}
\KeywordTok{end}
\end{Highlighting}
\end{Shaded}

\hypertarget{references}{%
\chapter*{References}\label{references}}
\addcontentsline{toc}{chapter}{References}

\hypertarget{refs}{}
\begin{cslreferences}
\leavevmode\hypertarget{ref-HampAnde15}{}%
Hampton, Stephanie E., Sean S. Anderson, Sarah C. Bagby, Corinna Gries,
Xueying Han, Edmund M. Hart, Matthew B. Jones, et al. 2015. ``The Tao of
Open Science for Ecology.'' \emph{Ecosphere} 6 (7): 1--13.
\url{https://doi.org/10.1890/ES14-00402.1}.
\end{cslreferences}

%

\end{document}